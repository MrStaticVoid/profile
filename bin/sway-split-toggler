#!/usr/bin/env zsh
#
# sway-split-toggler
#
# Watch for new windows and automatically create alternating horizontal and
# vertical splits for an effect like BSPWM
#

swaymsg --monitor -t subscribe '["window"]' | jq --unbuffered 'select(.change == "new").container.id' | while read con_id; do
    swaymsg "[con_id=${con_id}]" split toggle
done
