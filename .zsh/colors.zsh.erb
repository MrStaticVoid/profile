<% require 'colorscheme'
c = ColorScheme.new
xterm_escapes = ""
c.terminal.each_with_index do |color, i|
    xterm_escapes += "\\e]4;#{i};rgb:#{color.x11}\\a"
end
xterm_escapes += "\\e]10;rgb:#{c.foreground.x11}\\a"
xterm_escapes += "\\e]11;rgb:#{c.background.x11}\\a"
xterm_escapes += "\\e]12;rgb:#{c.cursor.x11}\\a"

linux_escapes = ""
c.console.each_with_index do |color, i|
    linux_escapes += '\e]P%x%s' % [i, color.hex]
end -%>
case $TERM in
    rxvt*256color|'xterm-256color')
        print -Pn '<%= xterm_escapes %>'
        ;;
    'linux')
        print -Pn '<%= linux_escapes %>'
        clear
        ;;
esac
